/**
 * @file cryptoUtils.ts
 * 
 * @description 
 * Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ð° Ð´Ð»Ñ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð±Ð¸Ð½Ð°Ñ€Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… (ArrayBuffer) Ð² hex-ÑÑ‚Ñ€Ð¾ÐºÑƒ.
 * Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¸Ð»Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡Ð¸ Ñ…ÐµÑˆÐµÐ¹ Ð¸ HMAC-Ð¿Ð¾Ð´Ð¿Ð¸ÑÐµÐ¹ Ð² Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ð¾Ð¼ Ð²Ð¸Ð´Ðµ.
 */

/**
 * ðŸ”§ ÐŸÑ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÐµÑ‚ ArrayBuffer Ð² hex-ÑÑ‚Ñ€Ð¾ÐºÑƒ.
 *
 * Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð±Ð¸Ð½Ð°Ñ€Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… (SHA-256, HMAC-Ð¿Ð¾Ð´Ð¿Ð¸ÑÑŒ Ð¸ Ð´Ñ€.)
 * Ð² Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÐ¾Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼Ð¾Ð¼ Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð°Ð²Ð°ÐµÐ¼Ð¾Ð¼ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð´Ð»Ñ HTTP-Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¾Ð²).
 *
 * ÐŸÑ€Ð¸Ð¼ÐµÑ€:
 *   bufferToHex(new Uint8Array([160, 255]).buffer) â†’ 'a0ff'
 *
 * @param buffer - Ð’Ñ…Ð¾Ð´Ð½Ð¾Ð¹ ArrayBuffer, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Web Crypto API
 * @returns Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð² hex-Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: "a0ffbc11...")
 */
export function bufferToHex(buffer: ArrayBuffer): string {
    return Array.from(new Uint8Array(buffer))
        .map(b => b.toString(16).padStart(2, '0'))
        .join('');
}